unit [0,0]
    function [0,750]
        type [0,10]
            specifier: static [0,6]
            name: int [7,10]
        name: get_bitmap_file [11,26]
        parameter_list [26,66]
            parameter [27,46]
                decl [27,46]
                    type [27,46]
                        name [27,39]
                            name: struct [27,33]
                            name: mddev [34,39]
                        modifier: * [40,41]
                    name: mddev [41,46]
            parameter [48,65]
                decl [48,65]
                    type [48,65]
                        name: void [48,52]
                        name: __user [53,59]
                        modifier: * [60,61]
                    name: arg [62,65]
        block [67,750]
            block_content [70,748]
                decl_stmt [70,101]
                    decl [70,100]
                        type [70,89]
                            name: mdu_bitmap_file_t [70,87]
                            modifier: * [88,89]
                        name: file [89,93]
                        init [94,100]
                            expr [96,100]
                                name: NULL [96,100]
                comment: /* too big for stack allocation */ [102,136]
                decl_stmt [138,148]
                    decl [138,147]
                        type [138,144]
                            name: char [138,142]
                            modifier: * [143,144]
                        name: ptr [144,147]
                decl_stmt [150,158]
                    decl [150,157]
                        type [150,153]
                            name: int [150,153]
                        name: err [154,157]
                expr_stmt [161,201]
                    expr [161,200]
                        name: file [161,165]
                        operator: = [166,167]
                        call [168,200]
                            name: kmalloc [168,175]
                            argument_list [175,200]
                                argument [176,189]
                                    expr [176,189]
                                        sizeof [176,189]
                                            argument_list [182,189]
                                                argument [183,188]
                                                    expr [183,188]
                                                        operator: * [183,184]
                                                        name: file [184,188]
                                argument [191,199]
                                    expr [191,199]
                                        name: GFP_NOIO [191,199]
                if_stmt [203,231]
                    if [203,231]
                        condition [206,213]
                            expr [207,212]
                                operator: ! [207,208]
                                name: file [208,212]
                        block [216,231]
                            block_content [216,231]
                                return [216,231]
                                    expr [223,230]
                                        operator: - [223,224]
                                        name: ENOMEM [224,230]
                expr_stmt [234,242]
                    expr [234,241]
                        name: err [234,237]
                        operator: = [238,239]
                        literal: 0 [240,241]
                expr_stmt [244,268]
                    expr [244,267]
                        call [244,267]
                            name: spin_lock [244,253]
                            argument_list [253,267]
                                argument [254,266]
                                    expr [254,266]
                                        operator: & [254,255]
                                        name [255,266]
                                            name: mddev [255,260]
                                            operator: -> [260,262]
                                            name: lock [262,266]
                comment: /* bitmap disabled, zero the first byte and copy out */ [270,325]
                if_stmt [327,612]
                    if [327,384]
                        condition [330,356]
                            expr [331,355]
                                operator: ! [331,332]
                                name [332,355]
                                    name: mddev [332,337]
                                    operator: -> [337,339]
                                    name: bitmap_info [339,350]
                                    operator: . [350,351]
                                    name: file [351,355]
                        block [359,384]
                            block_content [359,384]
                                expr_stmt [359,384]
                                    expr [359,383]
                                        name [359,376]
                                            name: file [359,363]
                                            operator: -> [363,365]
                                            name: pathname [365,373]
                                            index [373,376]
                                                expr [374,375]
                                                    literal: 0 [374,375]
                                        operator: = [377,378]
                                        literal: '\0' [379,383]
                    if [386,526]
                        condition [394,504]
                            expr [395,487]
                                operator: ( [395,396]
                                name: ptr [396,399]
                                operator: = [400,401]
                                call [402,486]
                                    name: file_path [402,411]
                                    argument_list [411,486]
                                        argument [412,435]
                                            expr [412,435]
                                                name [412,435]
                                                    name: mddev [412,417]
                                                    operator: -> [417,419]
                                                    name: bitmap_info [419,430]
                                                    operator: . [430,431]
                                                    name: file [431,435]
                                        argument [447,461]
                                            expr [447,461]
                                                name [447,461]
                                                    name: file [447,451]
                                                    operator: -> [451,453]
                                                    name: pathname [453,461]
                                        argument [463,485]
                                            expr [463,485]
                                                sizeof [463,485]
                                                    argument_list [469,485]
                                                        argument [470,484]
                                                            expr [470,484]
                                                                name [470,484]
                                                                    name: file [470,474]
                                                                    operator: -> [474,476]
                                                                    name: pathname [476,484]
                                operator: ) [486,487]
                            operator: , [487,488]
                            expr [492,503]
                                call [492,503]
                                    name: IS_ERR [492,498]
                                    argument_list [498,503]
                                        argument [499,502]
                                            expr [499,502]
                                                name: ptr [499,502]
                        block [507,526]
                            block_content [507,526]
                                expr_stmt [507,526]
                                    expr [507,525]
                                        name: err [507,510]
                                        operator: = [511,512]
                                        call [513,525]
                                            name: PTR_ERR [513,520]
                                            argument_list [520,525]
                                                argument [521,524]
                                                    expr [521,524]
                                                        name: ptr [521,524]
                    else [528,612]
                        block [535,612]
                            block_content [535,612]
                                expr_stmt [535,612]
                                    expr [535,611]
                                        call [535,611]
                                            name: memmove [535,542]
                                            argument_list [542,611]
                                                argument [543,557]
                                                    expr [543,557]
                                                        name [543,557]
                                                            name: file [543,547]
                                                            operator: -> [547,549]
                                                            name: pathname [549,557]
                                                argument [559,562]
                                                    expr [559,562]
                                                        name: ptr [559,562]
                                                argument [567,610]
                                                    expr [567,610]
                                                        sizeof [567,589]
                                                            argument_list [573,589]
                                                                argument [574,588]
                                                                    expr [574,588]
                                                                        name [574,588]
                                                                            name: file [574,578]
                                                                            operator: -> [578,580]
                                                                            name: pathname [580,588]
                                                        operator: - [589,590]
                                                        operator: ( [590,591]
                                                        name: ptr [591,594]
                                                        operator: - [594,595]
                                                        name [595,609]
                                                            name: file [595,599]
                                                            operator: -> [599,601]
                                                            name: pathname [601,609]
                                                        operator: ) [609,610]
                expr_stmt [614,640]
                    expr [614,639]
                        call [614,639]
                            name: spin_unlock [614,625]
                            argument_list [625,639]
                                argument [626,638]
                                    expr [626,638]
                                        operator: & [626,627]
                                        name [627,638]
                                            name: mddev [627,632]
                                            operator: -> [632,634]
                                            name: lock [634,638]
                if_stmt [643,720]
                    if [643,720]
                        condition [646,703]
                            expr [647,702]
                                name: err [647,650]
                                operator: == [651,653]
                                literal: 0 [654,655]
                                operator: && [656,658]
                                call [664,702]
                                    name: copy_to_user [664,676]
                                    argument_list [676,702]
                                        argument [677,680]
                                            expr [677,680]
                                                name: arg [677,680]
                                        argument [682,686]
                                            expr [682,686]
                                                name: file [682,686]
                                        argument [688,701]
                                            expr [688,701]
                                                sizeof [688,701]
                                                    argument_list [694,701]
                                                        argument [695,700]
                                                            expr [695,700]
                                                                operator: * [695,696]
                                                                name: file [696,700]
                        block [706,720]
                            block_content [706,720]
                                expr_stmt [706,720]
                                    expr [706,719]
                                        name: err [706,709]
                                        operator: = [710,711]
                                        operator: - [712,713]
                                        name: EFAULT [713,719]
                expr_stmt [723,735]
                    expr [723,734]
                        call [723,734]
                            name: kfree [723,728]
                            argument_list [728,734]
                                argument [729,733]
                                    expr [729,733]
                                        name: file [729,733]
                return [737,748]
                    expr [744,747]
                        name: err [744,747]