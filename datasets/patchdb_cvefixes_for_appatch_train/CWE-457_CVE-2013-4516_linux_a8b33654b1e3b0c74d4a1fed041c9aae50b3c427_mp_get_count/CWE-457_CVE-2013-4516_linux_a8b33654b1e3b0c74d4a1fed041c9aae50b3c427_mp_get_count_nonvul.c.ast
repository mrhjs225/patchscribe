unit [0,0]
    function [0,767]
        type [0,10]
            specifier: static [0,6]
            name: int [7,10]
        name: mp_get_count [11,23]
        parameter_list [23,89]
            parameter [24,51]
                decl [24,51]
                    type [24,51]
                        name [24,44]
                            name: struct [24,30]
                            name: sb_uart_state [31,44]
                        modifier: * [45,46]
                    name: state [46,51]
            parameter [53,88]
                decl [53,88]
                    type [53,88]
                        name [53,82]
                            name: struct [53,59]
                            name: serial_icounter_struct [60,82]
                        modifier: * [83,84]
                    name: icnt [84,88]
        block [90,767]
            block_content [93,765]
                decl_stmt [93,135]
                    decl [93,134]
                        type [93,122]
                            name [93,122]
                                name: struct [93,99]
                                name: serial_icounter_struct [100,122]
                        name: icount [123,129]
                        init [130,134]
                            expr [132,134]
                                block [132,134]
                decl_stmt [137,164]
                    decl [137,163]
                        type [137,158]
                            name [137,158]
                                name: struct [137,143]
                                name: sb_uart_icount [144,158]
                        name: cnow [159,163]
                decl_stmt [166,206]
                    decl [166,205]
                        type [166,187]
                            name [166,185]
                                name: struct [166,172]
                                name: sb_uart_port [173,185]
                            modifier: * [186,187]
                        name: port [187,191]
                        init [192,205]
                            expr [194,205]
                                name [194,205]
                                    name: state [194,199]
                                    operator: -> [199,201]
                                    name: port [201,205]
                expr_stmt [209,236]
                    expr [209,235]
                        call [209,235]
                            name: spin_lock_irq [209,222]
                            argument_list [222,235]
                                argument [223,234]
                                    expr [223,234]
                                        operator: & [223,224]
                                        name [224,234]
                                            name: port [224,228]
                                            operator: -> [228,230]
                                            name: lock [230,234]
                expr_stmt [238,298]
                    expr [238,297]
                        call [238,297]
                            name: memcpy [238,244]
                            argument_list [244,297]
                                argument [245,250]
                                    expr [245,250]
                                        operator: & [245,246]
                                        name: cnow [246,250]
                                argument [252,265]
                                    expr [252,265]
                                        operator: & [252,253]
                                        name [253,265]
                                            name: port [253,257]
                                            operator: -> [257,259]
                                            name: icount [259,265]
                                argument [267,296]
                                    expr [267,296]
                                        sizeof [267,296]
                                            argument_list [273,296]
                                                argument [274,295]
                                                    expr [274,295]
                                                        name: sb_uart_icount [281,295]
                expr_stmt [300,329]
                    expr [300,328]
                        call [300,328]
                            name: spin_unlock_irq [300,315]
                            argument_list [315,328]
                                argument [316,327]
                                    expr [316,327]
                                        operator: & [316,317]
                                        name [317,327]
                                            name: port [317,321]
                                            operator: -> [321,323]
                                            name: lock [323,327]
                expr_stmt [332,362]
                    expr [332,361]
                        name [332,342]
                            name: icount [332,338]
                            operator: . [338,339]
                            name: cts [339,342]
                        operator: = [351,352]
                        name [353,361]
                            name: cnow [353,357]
                            operator: . [357,358]
                            name: cts [358,361]
                expr_stmt [364,394]
                    expr [364,393]
                        name [364,374]
                            name: icount [364,370]
                            operator: . [370,371]
                            name: dsr [371,374]
                        operator: = [383,384]
                        name [385,393]
                            name: cnow [385,389]
                            operator: . [389,390]
                            name: dsr [390,393]
                expr_stmt [396,426]
                    expr [396,425]
                        name [396,406]
                            name: icount [396,402]
                            operator: . [402,403]
                            name: rng [403,406]
                        operator: = [415,416]
                        name [417,425]
                            name: cnow [417,421]
                            operator: . [421,422]
                            name: rng [422,425]
                expr_stmt [428,458]
                    expr [428,457]
                        name [428,438]
                            name: icount [428,434]
                            operator: . [434,435]
                            name: dcd [435,438]
                        operator: = [447,448]
                        name [449,457]
                            name: cnow [449,453]
                            operator: . [453,454]
                            name: dcd [454,457]
                expr_stmt [460,489]
                    expr [460,488]
                        name [460,469]
                            name: icount [460,466]
                            operator: . [466,467]
                            name: rx [467,469]
                        operator: = [479,480]
                        name [481,488]
                            name: cnow [481,485]
                            operator: . [485,486]
                            name: rx [486,488]
                expr_stmt [491,520]
                    expr [491,519]
                        name [491,500]
                            name: icount [491,497]
                            operator: . [497,498]
                            name: tx [498,500]
                        operator: = [510,511]
                        name [512,519]
                            name: cnow [512,516]
                            operator: . [516,517]
                            name: tx [517,519]
                expr_stmt [522,554]
                    expr [522,553]
                        name [522,534]
                            name: icount [522,528]
                            operator: . [528,529]
                            name: frame [529,534]
                        operator: = [541,542]
                        name [543,553]
                            name: cnow [543,547]
                            operator: . [547,548]
                            name: frame [548,553]
                expr_stmt [556,590]
                    expr [556,589]
                        name [556,570]
                            name: icount [556,562]
                            operator: . [562,563]
                            name: overrun [563,570]
                        operator: = [575,576]
                        name [577,589]
                            name: cnow [577,581]
                            operator: . [581,582]
                            name: overrun [582,589]
                expr_stmt [592,625]
                    expr [592,624]
                        name [592,605]
                            name: icount [592,598]
                            operator: . [598,599]
                            name: parity [599,605]
                        operator: = [611,612]
                        name [613,624]
                            name: cnow [613,617]
                            operator: . [617,618]
                            name: parity [618,624]
                expr_stmt [627,657]
                    expr [627,656]
                        name [627,637]
                            name: icount [627,633]
                            operator: . [633,634]
                            name: brk [634,637]
                        operator: = [646,647]
                        name [648,656]
                            name: cnow [648,652]
                            operator: . [652,653]
                            name: brk [653,656]
                expr_stmt [659,697]
                    expr [659,696]
                        name [659,677]
                            name: icount [659,665]
                            operator: . [665,666]
                            name: buf_overrun [666,677]
                        operator: = [678,679]
                        name [680,696]
                            name: cnow [680,684]
                            operator: . [684,685]
                            name: buf_overrun [685,696]
                return [700,765]
                    expr [707,764]
                        ternary [707,764]
                            condition [707,752]
                                expr [707,750]
                                    call [707,750]
                                        name: copy_to_user [707,719]
                                        argument_list [719,750]
                                            argument [720,724]
                                                expr [720,724]
                                                    name: icnt [720,724]
                                            argument [726,733]
                                                expr [726,733]
                                                    operator: & [726,727]
                                                    name: icount [727,733]
                                            argument [735,749]
                                                expr [735,749]
                                                    sizeof [735,749]
                                                        argument_list [741,749]
                                                            argument [742,748]
                                                                expr [742,748]
                                                                    name: icount [742,748]
                            then [753,760]
                                expr [753,760]
                                    operator: - [753,754]
                                    name: EFAULT [754,760]
                            else [761,764]
                                expr [763,764]
                                    literal: 0 [763,764]